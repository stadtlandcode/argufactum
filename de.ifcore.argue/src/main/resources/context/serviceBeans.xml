<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:task="http://www.springframework.org/schema/task" xmlns:p="http://www.springframework.org/schema/p"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
	http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.1.xsd">
	
	<bean id="urlService" class="de.ifcore.argue.services.UrlServiceImpl">
		<constructor-arg value="${absoluteUrlFragment}" />
		<constructor-arg value="${loginProtocol}" />
	</bean>
	
	<bean id="helpTextService" class="de.ifcore.argue.services.HelpTextServiceImpl">
		<constructor-arg>
			<set>
				<value>de</value>
			</set>
		</constructor-arg>
		<constructor-arg value="de" />
	</bean>
	
	<bean id="applicationService" class="de.ifcore.argue.services.ApplicationServiceImpl">
		<constructor-arg name="version" value="${project.version}" />
		<constructor-arg name="buildType" value="${build.type}" />
		<constructor-arg name="useMinifiedCssJs" value="${useMinifiedCssJs}" />
	</bean>
	
	<bean id="topicAccessRightService" class="de.ifcore.argue.services.TopicAccessRightServiceImpl" />
	
	<bean class="de.ifcore.argue.services.ComparisonValueDefinitionXmlService">
		<constructor-arg value="initialData/comparisonValueDefinitions_de.xml" />
	</bean>
	<bean class="de.ifcore.argue.services.UserXmlService">
		<constructor-arg value="initialData/users_de.xml" />
	</bean>
	<bean class="de.ifcore.argue.services.CategoryXmlService">
		<constructor-arg value="initialData/categories_de.xml" />
	</bean>
	<bean class="de.ifcore.argue.services.ProContraXmlService">
		<constructor-arg name="directory" value="initialData/proContra" />
	</bean>
	
	<bean id="topicViewCountService" class="de.ifcore.argue.services.TopicViewCountServiceImpl">
		<constructor-arg ref="topicDao" />
		<constructor-arg name="cacheSize" value="${maxViewCountCacheEntries}" />
		<constructor-arg name="maxUpdateQueries" value="${maxViewCountUpdateQueries}" />
	</bean>
	
	<task:executor id="executor" pool-size="4" queue-capacity="100" />
	<task:scheduler id="scheduler" pool-size="1" />
	<task:scheduled-tasks>
		<task:scheduled ref="topicViewCountService" method="updateTopics" fixed-rate="1800000" />
		<task:scheduled ref="homeService" method="updateLatestTopics" fixed-rate="600000" />
		<task:scheduled ref="homeService" method="updateTopicsByCategory" cron="0 0 3 * * *" />
	</task:scheduled-tasks>
</beans>